<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Estimasi Rencana Anggaran Biaya - Alfamart</title>
    <script>
      // Security Check: Redirect to login if not authenticated
      const isAuthenticated = sessionStorage.getItem('authenticated');
      if (!isAuthenticated) {
          // Path disesuaikan karena file ini ada di dalam folder Estimasi_rab
          window.location.href = '/index.html';
       }
    </script>
        
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header>
      <a href="/Homepage/index.html">
        <img src="../Assets/Alfamart-Emblem.png" alt="Alfamart Logo" class="header-logo" />
      </a>
      <h1>Form Estimasi Rencana Anggaran Biaya</h1>
    </header>
    <div class="container">
      <form id="form" class="form-container">
        <label for="lokasi">Lokasi:</label>
        <input
          type="text"
          id="lokasi"
          name="Lokasi"
          placeholder="Masukan Lokasi (Max 4 Karakter Alfanumerik)"
          oninput="this.value = this.value.replace(/[^a-zA-Z0-9]/g, '').slice(0, 4).toUpperCase()"
          maxlength="4"
          required
        />
        <label for="proyek">Proyek:</label>
        <select name="Proyek" id="proyek" required>
          <option value="">-- Pilih Jenis Proyek --</option>
          <option value="Alfamart Reguler">Reguler</option>
          <option value="Franchise">Franchise</option>
        </select>
        <label for="cabang">Cabang:</label>
        <select name="Cabang" id="cabang" required>
            <option value="">-- Pilih Cabang --</option>
                        <option value="ACEH">ACEH</option>
                        <option value="BALARAJA">BALARAJA</option>
                        <option value="BALI">BALI</option>
                        <option value="BANDUNG 1">BANDUNG 1</option>
                        <option value="BANDUNG 2">BANDUNG 2</option>
                        <option value="BANGKA">BANGKA</option>
                        <option value="BANJARMASIN">BANJARMASIN</option>
                        <option value="BATAM">BATAM</option>
                        <option value="BELITUNG">BELITUNG</option>
                        <option value="BENGKULU">BENGKULU</option>
                        <option value="BOGOR">BOGOR</option>
                        <option value="BPN_SMD">BPN_SMD</option>
                        <option value="CIANJUR">CIANJUR</option>
                        <option value="CIKOKOL">CIKOKOL</option>
                        <option value="CILACAP">CILACAP</option>
                        <option value="CILEUNGSI">CILEUNGSI</option>
                        <option value="GORONTALO">GORONTALO</option>
                        <option value="JAMBI">JAMBI</option>
                        <option value="JEMBER">JEMBER</option>
                        <option value="KARAWANG">KARAWANG</option>
                        <option value="KLATEN">KLATEN</option>
                        <option value="KOTABUMI">KOTABUMI</option>
                        <option value="LAMPUNG">LAMPUNG</option>
                        <option value="LOMBOK">LOMBOK</option>
                        <option value="LUWU">LUWU</option>
                        <option value="MADIUN">MADIUN</option>
                        <option value="MAKASSAR">MAKASSAR</option>
                        <option value="MALANG">MALANG</option>
                        <option value="MANADO">MANADO</option>
                        <option value="MANOKWARI">MANOKWARI</option>
                        <option value="MEDAN">MEDAN</option>
                        <option value="NTT">NTT</option>
                        <option value="PALEMBANG">PALEMBANG</option>
                        <option value="PARUNG">PARUNG</option>
                        <option value="PEKANBARU">PEKANBARU</option>
                        <option value="PLUMBON">PLUMBON</option>
                        <option value="PONTIANAK">PONTIANAK</option>
                        <option value="REMBANG">REMBANG</option>
                        <option value="SEMARANG">SEMARANG</option>
                        <option value="SERANG">SERANG</option>
                        <option value="SIDOARJO">SIDOARJO</option>
                        <option value="SORONG">SORONG</option>
                        <option value="LOMBOK">LOMOK</option>
                        <option value="TEGAL">TEGAL</option>
                        <option value="HEAD OFFICE">HEAD OFFICE</option>
        </select>
        <label for="lingkup_pekerjaan">Lingkup Pekerjaan:</label>
        <select name="Lingkup Pekerjaan" id="lingkup_pekerjaan" required>
          <option value="">-- Pilih Lingkup Pekerjaan --</option>
          <option value="Sipil">Sipil</option>
          <option value="ME">ME</option>
        </select>
        <label for="luas_bangunan">Luas Bangunan (m²):</label>
        <input
          type="text"
          inputmode="decimal"
          id="luas_bangunan"
          name="Luas Bangunan"
          placeholder="Masukan Luas Bangunan (e.g., 50.25)"
          oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1').replace(/(\.\d{2})\d+/, '$1')"
          required
        />
        <label for="luas_terbangunan">Luas Terbangunan (m²):</label>
        <input
          type="text"
          inputmode="decimal"
          id="luas_terbangunan"
          name="Luas Terbangunan"
          placeholder="Masukan Luas Terbangunan (e.g., 45.50)"
          oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1').replace(/(\.\d{2})\d+/, '$1')"
          required
        />
        <label for="luas_area_terbuka">Luas Area Terbuka (m²):</label>
        <input
          type="text"
          inputmode="decimal"
          id="luas_area_terbuka"
          name="Luas Area Terbuka"
          placeholder="Masukan Luas Area Terbuka (e.g., 20.00)"
          oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1').replace(/(\.\d{2})\d+/, '$1')"
          required
        />
        <label for="luas_area_parkir">Luas Area Parkir (m²):</label>
        <input
          type="text"
          inputmode="decimal"
          id="luas_area_parkir"
          name="Luas Area Parkir"
          placeholder="Masukan Luas Area Parkir (e.g., 20.00)"
          oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1').replace(/(\.\d{2})\d+/, '$1')"
          required
        />
        <label for="luas_area_sales">Luas Area Sales (m²):</label>
        <input
          type="text"
          inputmode="decimal"
          id="luas_area_sales"
          name="Luas Area Sales"
          placeholder="Masukan Luas Area Sales (e.g., 30.75)"
          oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1').replace(/(\.\d{2})\d+/, '$1')"
          required
        />
        <label for="luas_gudang">Luas Gudang (m²):</label>
        <input
          type="text"
          inputmode="decimal"
          id="luas_gudang"
          name="Luas Gudang"
          placeholder="Masukan Luas Gudang (e.g., 15.20)"
          oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1').replace(/(\.\d{2})\d+/, '$1')"
          required
        />
        <div class="all-tables-container">
          <div id="sipil-tables-wrapper" class="hidden">
            <h2 class="text-lg font-semibold mt-6 mb-2 section-title">PEKERJAAN PERSIAPAN</h2>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th rowspan="2">No</th>
                    <th rowspan="2">Jenis Pekerjaan</th>
                    <th rowspan="2">Satuan</th>
                    <th colspan="1">Volume</th>
                    <th colspan="2">Harga Satuan (Rp)</th>
                    <th colspan="2">Total Harga Satuan (Rp)</th>
                    <th colspan="1">Total Harga (Rp)</th>
                    <th rowspan="2">Aksi</th>
                  </tr>
                  <tr>
                    <th>a</th>
                    <th>Material<br />(b)</th>
                    <th>Upah<br />(c)</th>
                    <th>Material<br />(d = a × b)</th>
                    <th>Upah<br />(e = a × c)</th>
                    <th>(f = d + e)</th>
                  </tr>
                </thead>
                <tbody
                  class="boq-table-body"
                  data-category="PEKERJAAN PERSIAPAN"
                  data-scope="Sipil"
                ></tbody>
                <tfoot>
                  <tr>
                    <td colspan="8" style="text-align: right; font-weight: bold">
                      Sub Total:
                    </td>
                    <td
                      class="sub-total-amount"
                      style="font-weight: bold; text-align: center"
                    >
                      Rp 0
                    </td>
                    <td></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <button
              type="button"
              class="add-row-btn"
              data-category="PEKERJAAN PERSIAPAN"
              data-scope="Sipil"
            >
              Tambah Item Pekerjaan Persiapan
            </button>
            <h2 class="text-lg font-semibold mt-6 mb-2 section-title">
              PEKERJAAN BOBOKAN / BONGKARAN
            </h2>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th rowspan="2">No</th>
                    <th rowspan="2">Jenis Pekerjaan</th>
                    <th rowspan="2">Satuan</th>
                    <th colspan="1">Volume</th>
                    <th colspan="2">Harga Satuan (Rp)</th>
                    <th colspan="2">Total Harga Satuan (Rp)</th>
                    <th colspan="1">Total Harga (Rp)</th>
                    <th rowspan="2">Aksi</th>
                  </tr>
                  <tr>
                    <th>a</th>
                    <th>Material<br />(b)</th>
                    <th>Upah<br />(c)</th>
                    <th>Material<br />(d = a × b)</th>
                    <th>Upah<br />(e = a × c)</th>
                    <th>(f = d + e)</th>
                  </tr>
                </thead>
                <tbody
                  class="boq-table-body"
                  data-category="PEKERJAAN BOBOKAN / BONGKARAN"
                  data-scope="Sipil"
                ></tbody>
                <tfoot>
                  <tr>
                    <td colspan="8" style="text-align: right; font-weight: bold">
                      Sub Total:
                    </td>
                    <td
                      class="sub-total-amount"
                      style="font-weight: bold; text-align: center"
                    >
                      Rp 0
                    </td>
                    <td></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <button
              type="button"
              class="add-row-btn"
              data-category="PEKERJAAN BOBOKAN / BONGKARAN"
              data-scope="Sipil"
            >
              Tambah Item Pekerjaan Bobokan / Bongkaran
            </button>
            <h2 class="text-lg font-semibold mt-6 mb-2 section-title">PEKERJAAN TANAH</h2>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th rowspan="2">No</th>
                    <th rowspan="2">Jenis Pekerjaan</th>
                    <th rowspan="2">Satuan</th>
                    <th colspan="1">Volume</th>
                    <th colspan="2">Harga Satuan (Rp)</th>
                    <th colspan="2">Total Harga Satuan (Rp)</th>
                    <th colspan="1">Total Harga (Rp)</th>
                    <th rowspan="2">Aksi</th>
                  </tr>
                  <tr>
                    <th>a</th>
                    <th>Material<br />(b)</th>
                    <th>Upah<br />(c)</th>
                    <th>Material<br />(d = a × b)</th>
                    <th>Upah<br />(e = a × c)</th>
                    <th>(f = d + e)</th>
                  </tr>
                </thead>
                <tbody
                  class="boq-table-body"
                  data-category="PEKERJAAN TANAH"
                  data-scope="Sipil"
                ></tbody>
                <tfoot>
                  <tr>
                    <td colspan="8" style="text-align: right; font-weight: bold">
                      Sub Total:
                    </td>
                    <td
                      class="sub-total-amount"
                      style="font-weight: bold; text-align: center"
                    >
                      Rp 0
                    </td>
                    <td></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <button
              type="button"
              class="add-row-btn"
              data-category="PEKERJAAN TANAH"
              data-scope="Sipil"
            >
              Tambah Item Pekerjaan Tanah
            </button>
            <h2 class="text-lg font-semibold mt-6 mb-2 section-title">
              PEKERJAAN PONDASI & BETON
            </h2>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th rowspan="2">No</th>
                    <th rowspan="2">Jenis Pekerjaan</th>
                    <th rowspan="2">Satuan</th>
                    <th colspan="1">Volume</th>
                    <th colspan="2">Harga Satuan (Rp)</th>
                    <th colspan="2">Total Harga Satuan (Rp)</th>
                    <th colspan="1">Total Harga (Rp)</th>
                    <th rowspan="2">Aksi</th>
                  </tr>
                  <tr>
                    <th>a</th>
                    <th>Material<br />(b)</th>
                    <th>Upah<br />(c)</th>
                    <th>Material<br />(d = a × b)</th>
                    <th>Upah<br />(e = a × c)</th>
                    <th>(f = d + e)</th>
                  </tr>
                </thead>
                <tbody
                  class="boq-table-body"
                  data-category="PEKERJAAN PONDASI & BETON"
                  data-scope="Sipil"
                ></tbody>
                <tfoot>
                  <tr>
                    <td colspan="8" style="text-align: right; font-weight: bold">
                      Sub Total:
                    </td>
                    <td
                      class="sub-total-amount"
                      style="font-weight: bold; text-align: center"
                    >
                      Rp 0
                    </td>
                    <td></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <button
              type="button"
              class="add-row-btn"
              data-category="PEKERJAAN PONDASI & BETON"
              data-scope="Sipil"
            >
              Tambah Item Pekerjaan Pondasi & Beton
            </button>
            <h2 class="text-lg font-semibold mt-6 mb-2 section-title">PEKERJAAN PASANGAN</h2>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th rowspan="2">No</th>
                    <th rowspan="2">Jenis Pekerjaan</th>
                    <th rowspan="2">Satuan</th>
                    <th colspan="1">Volume</th>
                    <th colspan="2">Harga Satuan (Rp)</th>
                    <th colspan="2">Total Harga Satuan (Rp)</th>
                    <th colspan="1">Total Harga (Rp)</th>
                    <th rowspan="2">Aksi</th>
                  </tr>
                  <tr>
                    <th>a</th>
                    <th>Material<br />(b)</th>
                    <th>Upah<br />(c)</th>
                    <th>Material<br />(d = a × b)</th>
                    <th>Upah<br />(e = a × c)</th>
                    <th>(f = d + e)</th>
                  </tr>
                </thead>
                <tbody
                  class="boq-table-body"
                  data-category="PEKERJAAN PASANGAN"
                  data-scope="Sipil"
                ></tbody>
                <tfoot>
                  <tr>
                    <td colspan="8" style="text-align: right; font-weight: bold">
                      Sub Total:
                    </td>
                    <td
                      class="sub-total-amount"
                      style="font-weight: bold; text-align: center"
                    >
                      Rp 0
                    </td>
                    <td></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <button
              type="button"
              class="add-row-btn"
              data-category="PEKERJAAN PASANGAN"
              data-scope="Sipil"
            >
              Tambah Item Pekerjaan Pasangan
            </button>
            <h2 class="text-lg font-semibold mt-6 mb-2 section-title">PEKERJAAN BESI</h2>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th rowspan="2">No</th>
                    <th rowspan="2">Jenis Pekerjaan</th>
                    <th rowspan="2">Satuan</th>
                    <th colspan="1">Volume</th>
                    <th colspan="2">Harga Satuan (Rp)</th>
                    <th colspan="2">Total Harga Satuan (Rp)</th>
                    <th colspan="1">Total Harga (Rp)</th>
                    <th rowspan="2">Aksi</th>
                  </tr>
                  <tr>
                    <th>a</th>
                    <th>Material<br />(b)</th>
                    <th>Upah<br />(c)</th>
                    <th>Material<br />(d = a × b)</th>
                    <th>Upah<br />(e = a × c)</th>
                    <th>(f = d + e)</th>
                  </tr>
                </thead>
                <tbody
                  class="boq-table-body"
                  data-category="PEKERJAAN BESI"
                  data-scope="Sipil"
                ></tbody>
                <tfoot>
                  <tr>
                    <td colspan="8" style="text-align: right; font-weight: bold">
                      Sub Total:
                    </td>
                    <td
                      class="sub-total-amount"
                      style="font-weight: bold; text-align: center"
                    >
                      Rp 0
                    </td>
                    <td></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <button
              type="button"
              class="add-row-btn"
              data-category="PEKERJAAN BESI"
              data-scope="Sipil"
            >
              Tambah Item Pekerjaan Besi
            </button>
            <h2 class="text-lg font-semibold mt-6 mb-2 section-title">PEKERJAAN KERAMIK</h2>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th rowspan="2">No</th>
                    <th rowspan="2">Jenis Pekerjaan</th>
                    <th rowspan="2">Satuan</th>
                    <th colspan="1">Volume</th>
                    <th colspan="2">Harga Satuan (Rp)</th>
                    <th colspan="2">Total Harga Satuan (Rp)</th>
                    <th colspan="1">Total Harga (Rp)</th>
                    <th rowspan="2">Aksi</th>
                  </tr>
                  <tr>
                    <th>a</th>
                    <th>Material<br />(b)</th>
                    <th>Upah<br />(c)</th>
                    <th>Material<br />(d = a × b)</th>
                    <th>Upah<br />(e = a × c)</th>
                    <th>(f = d + e)</th>
                  </tr>
                </thead>
                <tbody
                  class="boq-table-body"
                  data-category="PEKERJAAN KERAMIK"
                  data-scope="Sipil"
                ></tbody>
                <tfoot>
                  <tr>
                    <td colspan="8" style="text-align: right; font-weight: bold">
                      Sub Total:
                    </td>
                    <td
                      class="sub-total-amount"
                      style="font-weight: bold; text-align: center"
                    >
                      Rp 0
                    </td>
                    <td></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <button
              type="button"
              class="add-row-btn"
              data-category="PEKERJAAN KERAMIK"
              data-scope="Sipil"
            >
              Tambah Item Pekerjaan Keramik
            </button>
            <h2 class="text-lg font-semibold mt-6 mb-2 section-title">PEKERJAAN PLUMBING</h2>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th rowspan="2">No</th>
                    <th rowspan="2">Jenis Pekerjaan</th>
                    <th rowspan="2">Satuan</th>
                    <th colspan="1">Volume</th>
                    <th colspan="2">Harga Satuan (Rp)</th>
                    <th colspan="2">Total Harga Satuan (Rp)</th>
                    <th colspan="1">Total Harga (Rp)</th>
                    <th rowspan="2">Aksi</th>
                  </tr>
                  <tr>
                    <th>a</th>
                    <th>Material<br />(b)</th>
                    <th>Upah<br />(c)</th>
                    <th>Material<br />(d = a × b)</th>
                    <th>Upah<br />(e = a × c)</th>
                    <th>(f = d + e)</th>
                  </tr>
                </thead>
                <tbody
                  class="boq-table-body"
                  data-category="PEKERJAAN PLUMBING"
                  data-scope="Sipil"
                ></tbody>
                <tfoot>
                  <tr>
                    <td colspan="8" style="text-align: right; font-weight: bold">
                      Sub Total:
                    </td>
                    <td
                      class="sub-total-amount"
                      style="font-weight: bold; text-align: center"
                    >
                      Rp 0
                    </td>
                    <td></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <button
              type="button"
              class="add-row-btn"
              data-category="PEKERJAAN PLUMBING"
              data-scope="Sipil"
            >
              Tambah Item Pekerjaan Plumbing
            </button>
            <h2 class="text-lg font-semibold mt-6 mb-2 section-title">
              PEKERJAAN SANITARY & ACECORIES
            </h2>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th rowspan="2">No</th>
                    <th rowspan="2">Jenis Pekerjaan</th>
                    <th rowspan="2">Satuan</th>
                    <th colspan="1">Volume</th>
                    <th colspan="2">Harga Satuan (Rp)</th>
                    <th colspan="2">Total Harga Satuan (Rp)</th>
                    <th colspan="1">Total Harga (Rp)</th>
                    <th rowspan="2">Aksi</th>
                  </tr>
                  <tr>
                    <th>a</th>
                    <th>Material<br />(b)</th>
                    <th>Upah<br />(c)</th>
                    <th>Material<br />(d = a × b)</th>
                    <th>Upah<br />(e = a × c)</th>
                    <th>(f = d + e)</th>
                  </tr>
                </thead>
                <tbody
                  class="boq-table-body"
                  data-category="PEKERJAAN SANITARY & ACECORIES"
                  data-scope="Sipil"
                ></tbody>
                <tfoot>
                  <tr>
                    <td colspan="8" style="text-align: right; font-weight: bold">
                      Sub Total:
                    </td>
                    <td
                      class="sub-total-amount"
                      style="font-weight: bold; text-align: center"
                    >
                      Rp 0
                    </td>
                    <td></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <button
              type="button"
              class="add-row-btn"
              data-category="PEKERJAAN SANITARY & ACECORIES"
              data-scope="Sipil"
            >
              Tambah Item Pekerjaan Sanitary & Acecories
            </button>
            <h2 class="text-lg font-semibold mt-6 mb-2 section-title">PEKERJAAN ATAP</h2>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th rowspan="2">No</th>
                    <th rowspan="2">Jenis Pekerjaan</th>
                    <th rowspan="2">Satuan</th>
                    <th colspan="1">Volume</th>
                    <th colspan="2">Harga Satuan (Rp)</th>
                    <th colspan="2">Total Harga Satuan (Rp)</th>
                    <th colspan="1">Total Harga (Rp)</th>
                    <th rowspan="2">Aksi</th>
                  </tr>
                  <tr>
                    <th>a</th>
                    <th>Material<br />(b)</th>
                    <th>Upah<br />(c)</th>
                    <th>Material<br />(d = a × b)</th>
                    <th>Upah<br />(e = a × c)</th>
                    <th>(f = d + e)</th>
                  </tr>
                </thead>
                <tbody
                  class="boq-table-body"
                  data-category="PEKERJAAN ATAP"
                  data-scope="Sipil"
                ></tbody>
                <tfoot>
                  <tr>
                    <td colspan="8" style="text-align: right; font-weight: bold">
                      Sub Total:
                    </td>
                    <td
                      class="sub-total-amount"
                      style="font-weight: bold; text-align: center"
                    >
                      Rp 0
                    </td>
                    <td></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <button
              type="button"
              class="add-row-btn"
              data-category="PEKERJAAN ATAP"
              data-scope="Sipil"
            >
              Tambah Item Pekerjaan Atap
            </button>
            <h2 class="text-lg font-semibold mt-6 mb-2 section-title">
              PEKERJAAN KUSEN, PINTU & KACA
            </h2>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th rowspan="2">No</th>
                    <th rowspan="2">Jenis Pekerjaan</th>
                    <th rowspan="2">Satuan</th>
                    <th colspan="1">Volume</th>
                    <th colspan="2">Harga Satuan (Rp)</th>
                    <th colspan="2">Total Harga Satuan (Rp)</th>
                    <th colspan="1">Total Harga (Rp)</th>
                    <th rowspan="2">Aksi</th>
                  </tr>
                  <tr>
                    <th>a</th>
                    <th>Material<br />(b)</th>
                    <th>Upah<br />(c)</th>
                    <th>Material<br />(d = a × b)</th>
                    <th>Upah<br />(e = a × c)</th>
                    <th>(f = d + e)</th>
                  </tr>
                </thead>
                <tbody
                  class="boq-table-body"
                  data-category="PEKERJAAN KUSEN, PINTU & KACA"
                  data-scope="Sipil"
                ></tbody>
                <tfoot>
                  <tr>
                    <td colspan="8" style="text-align: right; font-weight: bold">
                      Sub Total:
                    </td>
                    <td
                      class="sub-total-amount"
                      style="font-weight: bold; text-align: center"
                    >
                      Rp 0
                    </td>
                    <td></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <button
              type="button"
              class="add-row-btn"
              data-category="PEKERJAAN KUSEN, PINTU & KACA"
              data-scope="Sipil"
            >
              Tambah Item Pekerjaan Kusen, Pintu & Kaca
            </button>
            <h2 class="text-lg font-semibold mt-6 mb-2 section-title">PEKERJAAN FINISHING</h2>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th rowspan="2">No</th>
                    <th rowspan="2">Jenis Pekerjaan</th>
                    <th rowspan="2">Satuan</th>
                    <th colspan="1">Volume</th>
                    <th colspan="2">Harga Satuan (Rp)</th>
                    <th colspan="2">Total Harga Satuan (Rp)</th>
                    <th colspan="1">Total Harga (Rp)</th>
                    <th rowspan="2">Aksi</th>
                  </tr>
                  <tr>
                    <th>a</th>
                    <th>Material<br />(b)</th>
                    <th>Upah<br />(c)</th>
                    <th>Material<br />(d = a × b)</th>
                    <th>Upah<br />(e = a × c)</th>
                    <th>(f = d + e)</th>
                  </tr>
                </thead>
                <tbody
                  class="boq-table-body"
                  data-category="PEKERJAAN FINISHING"
                  data-scope="Sipil"
                ></tbody>
                <tfoot>
                  <tr>
                    <td colspan="8" style="text-align: right; font-weight: bold">
                      Sub Total:
                    </td>
                    <td
                      class="sub-total-amount"
                      style="font-weight: bold; text-align: center"
                    >
                      Rp 0
                    </td>
                    <td></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <button
              type="button"
              class="add-row-btn"
              data-category="PEKERJAAN FINISHING"
              data-scope="Sipil"
            >
              Tambah Item Pekerjaan Finishing
            </button>
            <h2 class="text-lg font-semibold mt-6 mb-2 section-title">
              PEKERJAAN TAMBAHAN
            </h2>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th rowspan="2">No</th>
                    <th rowspan="2">Jenis Pekerjaan</th>
                    <th rowspan="2">Satuan</th>
                    <th colspan="1">Volume</th>
                    <th colspan="2">Harga Satuan (Rp)</th>
                    <th colspan="2">Total Harga Satuan (Rp)</th>
                    <th colspan="1">Total Harga (Rp)</th>
                    <th rowspan="2">Aksi</th>
                  </tr>
                  <tr>
                    <th>a</th>
                    <th>Material<br />(b)</th>
                    <th>Upah<br />(c)</th>
                    <th>Material<br />(d = a × b)</th>
                    <th>Upah<br />(e = a × c)</th>
                    <th>(f = d + e)</th>
                  </tr>
                </thead>
                <tbody
                  class="boq-table-body"
                  data-category="PEKERJAAN TAMBAHAN"
                  data-scope="Sipil"
                ></tbody>
                <tfoot>
                  <tr>
                    <td colspan="8" style="text-align: right; font-weight: bold">
                      Sub Total:
                    </td>
                    <td
                      class="sub-total-amount"
                      style="font-weight: bold; text-align: center"
                    >
                      Rp 0
                    </td>
                    <td></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <button
              type="button"
              class="add-row-btn"
              data-category="PEKERJAAN TAMBAHAN"
              data-scope="Sipil"
            >
              Tambah Item Pekerjaan Tambahan
            </button>
          </div>
          <div id="me-tables-wrapper" class="hidden">
            <h2 class="text-lg font-semibold mt-6 mb-2 section-title">INSTALASI</h2>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th rowspan="2">No</th>
                    <th rowspan="2">Jenis Pekerjaan</th>
                    <th rowspan="2">Satuan</th>
                    <th colspan="1">Volume</th>
                    <th colspan="2">Harga Satuan (Rp)</th>
                    <th colspan="2">Total Harga Satuan (Rp)</th>
                    <th colspan="1">Total Harga (Rp)</th>
                    <th rowspan="2">Aksi</th>
                  </tr>
                  <tr>
                    <th>a</th>
                    <th>Material<br />(b)</th>
                    <th>Upah<br />(c)</th>
                    <th>Material<br />(d = a × b)</th>
                    <th>Upah<br />(e = a × c)</th>
                    <th>(f = d + e)</th>
                  </tr>
                </thead>
                <tbody
                  class="boq-table-body"
                  data-category="INSTALASI"
                  data-scope="ME"
                ></tbody>
                <tfoot>
                  <tr>
                    <td colspan="8" style="text-align: right; font-weight: bold">
                      Sub Total:
                    </td>
                    <td
                      class="sub-total-amount"
                      style="font-weight: bold; text-align: center"
                    >
                      Rp 0
                    </td>
                    <td></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <button
              type="button"
              class="add-row-btn"
              data-category="INSTALASI"
              data-scope="ME"
            >
              Tambah Item Pekerjaan Instalasi
            </button>
            <h2 class="text-lg font-semibold mt-6 mb-2 section-title">FIXTURE</h2>
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th rowspan="2">No</th>
                    <th rowspan="2">Jenis Pekerjaan</th>
                    <th rowspan="2">Satuan</th>
                    <th colspan="1">Volume</th>
                    <th colspan="2">Harga Satuan (Rp)</th>
                    <th colspan="2">Total Harga Satuan (Rp)</th>
                    <th colspan="1">Total Harga (Rp)</th>
                    <th rowspan="2">Aksi</th>
                  </tr>
                  <tr>
                    <th>a</th>
                    <th>Material<br />(b)</th>
                    <th>Upah<br />(c)</th>
                    <th>Material<br />(d = a × b)</th>
                    <th>Upah<br />(e = a × c)</th>
                    <th>(f = d + e)</th>
                  </tr>
                </thead>
                <tbody
                  class="boq-table-body"
                  data-category="FIXTURE"
                  data-scope="ME"
                ></tbody>
                <tfoot>
                  <tr>
                    <td colspan="8" style="text-align: right; font-weight: bold">
                      Sub Total:
                    </td>
                    <td
                      class="sub-total-amount"
                      style="font-weight: bold; text-align: center"
                    >
                      Rp 0
                    </td>
                    <td></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <button
              type="button"
              class="add-row-btn"
              data-category="FIXTURE"
              data-scope="ME"
            >
              Tambah Item Pekerjaan Fixture
            </button>
          </div>
        </div>
                
        <div class="mt-6 p-4 grand-total-box">
          <span class="text-lg font-bold">Grand Total Estimasi Biaya:</span>
          <span id="grand-total-amount" class="text-xl font-extrabold ml-4"
            >Rp 0</span
          >
        </div>
        <div class="button-group">
          <button type="submit" id="submit-button">Kirim</button>
          <button type="reset">Ulang</button>
        </div>
      </form>
      <a href="/Homepage/index.html" class="back-btn">← Kembali ke Beranda</a>
    </div>
    <div id="message" role="status" aria-live="polite"></div>
    <script src="script.js"></script>
    
    <!-- KODE MODIFIKASI DITAMBAHKAN DI SINI -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // 1. Ambil data cabang pengguna dari session storage
        const userBranch = sessionStorage.getItem('loggedInUserCabang');
        // Jika karena suatu hal data cabang tidak ada, hentikan eksekusi skrip
        if (!userBranch) {
            console.error("Data cabang pengguna tidak ditemukan di session storage.");
          return;
        }
                
        // 2. Temukan elemen dropdown cabang di halaman
        const branchDropdown = document.getElementById('cabang');
        if (!branchDropdown) {
          console.error('Elemen dropdown dengan ID "cabang" tidak ditemukan!');
          return;
        }
        
        // 3. Definisikan aturan akses khusus
        const specialAccessRules = {
          'SIDOARJO': ['SIDOARJO', 'BPN_SMD', 'MANOKWARI', 'NTT', 'SORONG'],
          'MEDAN': ['MEDAN', 'ACEH'],
          'PALEMBANG': ['PALEMBANG', 'BANGKA', 'BELITUNG', 'BENGKULU'],
          'LOMBOK': ['LOMBOK','SUMBAWA']
        };
        
        // 4. Tentukan cabang yang boleh diakses pengguna
        const allowedBranches = specialAccessRules[userBranch.toUpperCase()] || [userBranch];
        const allowedBranchesUpper = allowedBranches.map(b => b.toUpperCase());
        
        // 5. Simpan semua opsi yang ada saat ini
        const allOptions = Array.from(branchDropdown.options);
        branchDropdown.innerHTML = ''; // Kosongkan dropdown
        
        // 6. Filter dan tambahkan kembali opsi yang diizinkan
        allOptions.forEach(option => {
            // Biarkan opsi pertama ("-- Pilih Cabang --") dan opsi yang diizinkan
            if (option.value === "" || allowedBranchesUpper.includes(option.value.toUpperCase())) {
                branchDropdown.add(option);
            }
        });
        
        // 7. Atur nilai default dan status dropdown
        if (branchDropdown.options.length === 2) { // Jika hanya ada 1 cabang yang diizinkan + opsi "pilih"
          branchDropdown.selectedIndex = 1; // Otomatis pilih cabang tersebut
          branchDropdown.disabled = true; // Kunci dropdown
        } else {
          // Jika akses > 1, atur cabang utama sebagai default
          const primaryBranchOption = Array.from(branchDropdown.options).find(opt => opt.value.toUpperCase() === userBranch.toUpperCase());
          if (primaryBranchOption) {
            branchDropdown.value = primaryBranchOption.value;
          }
        }
      });
    </script>
  </body>
</html>