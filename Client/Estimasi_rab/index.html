<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Estimasi Rencana Anggaran Biaya - Alfamart</title>
    <script>
        // Security Check
        if (!sessionStorage.getItem('authenticated')) {
            window.location.href = '/'; 
        }
    </script>
    <link rel="stylesheet" href="/Estimasi_rab/style.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
</head>
<body>
    <header class="main-header">
        <a href="/Homepage/">
            <img src="/Assets/Alfamart-Emblem.png" alt="Alfamart Logo" class="header-logo" />
        </a>
        <h1>Form Estimasi Rencana Anggaran Biaya</h1>
    </header>

    <div class="container">
        <div id="message" role="status" aria-live="polite" class="message-banner" style="display: none;"></div>

        <form id="form" class="form-container">
            <div class="form-grid">
                <div class="form-group">
                    <label for="lokasi">Lokasi / Kode Toko</label>
                    <input type="text" id="lokasi" name="Lokasi" placeholder="Max 4 karakter alfanumerik" oninput="this.value = this.value.replace(/[^a-zA-Z0-9]/g, '').slice(0, 4).toUpperCase()" maxlength="4" required />
                </div>
                <div class="form-group">
                    <label for="proyek">Jenis Toko</label>
                    <select name="Proyek" id="proyek" required>
                        <option value="">-- Pilih Jenis Toko --</option>
                        <option value="Alfamart Reguler">Reguler</option>
                        <option value="Franchise">Franchise</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="cabang">Cabang</label>
                    <select name="Cabang" id="cabang" required>
                        <option value="">-- Pilih Cabang --</option>
                        <option value="BALARAJA">BALARAJA</option>
                        <option value="BALI">BALI</option>
                        <option value="BANDUNG 1">BANDUNG 1</option>
                        <option value="BANDUNG 2">BANDUNG 2</option>
                        <option value="BANJARMASIN">BANJARMASIN</option>
                        <option value="BATAM">BATAM</option>
                        <option value="BEKASI">BEKASI</option>
                        <option value="BOGOR">BOGOR</option>
                        <option value="CIANJUR">CIANJUR</option>
                        <option value="CIKOKOL">CIKOKOL</option>
                        <option value="CILACAP">CILACAP</option>
                        <option value="CILEUNGSI">CILEUNGSI</option>
                        <option value="GORONTALO">GORONTALO</option>
                        <option value="JAMBI">JAMBI</option>
                        <option value="JEMBER">JEMBER</option>
                        <option value="KARAWANG">KARAWANG</option>
                        <option value="KLATEN">KLATEN</option>
                        <option value="KOTABUMI">KOTABUMI</option>
                        <option value="LAMPUNG">LAMPUNG</option>
                        <option value="LOMBOK">LOMBOK</option>
                        <option value="LUWU">LUWU</option>
                        <option value="MADIUN">MADIUN</option>
                        <option value="MAKASSAR">MAKASSAR</option>
                        <option value="MALANG">MALANG</option>
                        <option value="MANADO">MANADO</option>
                        <option value="MEDAN">MEDAN</option>
                        <option value="PALEMBANG">PALEMBANG</option>
                        <option value="PARUNG">PARUNG</option>
                        <option value="PEKANBARU">PEKANBARU</option>
                        <option value="PLUMBON">PLUMBON</option>
                        <option value="PONTIANAK">PONTIANAK</option>
                        <option value="REMBANG">REMBANG</option>
                        <option value="SEMARANG">SEMARANG</option>
                        <option value="SERANG">SERANG</option>
                        <option value="SIDOARJO">SIDOARJO</option>
                        <option value="TEGAL">TEGAL</option>
                        <option value="HEAD OFFICE">HEAD OFFICE</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="luas_bangunan">Luas Bangunan (m²)</label>
                    <input type="text" inputmode="decimal" id="luas_bangunan" name="Luas Bangunan" placeholder="e.g., 50.25" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1').replace(/(\.\d{2})\d+/, '$1')" required />
                </div>
                <div class="form-group">
                    <label for="luas_terbangunan">Luas Terbangunan (m²)</label>
                    <input type="text" inputmode="decimal" id="luas_terbangunan" name="Luas Terbangunan" placeholder="e.g., 45.50" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1').replace(/(\.\d{2})\d+/, '$1')" required />
                </div>
                <div class="form-group">
                    <label for="luas_area_terbuka_parkir">Luas Area Terbuka / Parkir (m²)</label>
                    <input type="text" inputmode="decimal" id="luas_area_terbuka_parkir" name="Luas Area Terbuka Area Parkir" placeholder="e.g., 20.00" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1').replace(/(\.\d{2})\d+/, '$1')" required />
                </div>
                <div class="form-group">
                    <label for="luas_area_sales">Luas Area Sales (m²)</label>
                    <input type="text" inputmode="decimal" id="luas_area_sales" name="Luas Area Sales" placeholder="e.g., 30.75" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1').replace(/(\.\d{2})\d+/, '$1')" required />
                </div>
                <div class="form-group">
                    <label for="luas_gudang">Luas Gudang (m²)</label>
                    <input type="text" inputmode="decimal" id="luas_gudang" name="Luas Gudang" placeholder="e.g., 15.20" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1').replace(/(\.\d{2})\d+/, '$1')" required />
                </div>
                 <div class="form-group">
                    <label for="lingkup_pekerjaan">Lingkup Pekerjaan</label>
                    <select name="Lingkup Pekerjaan" id="lingkup_pekerjaan" required>
                        <option value="">-- Pilih Lingkup --</option>
                        <option value="Sipil">Sipil</option>
                        <option value="ME">ME</option>
                    </select>
                </div>
            </div>

            <div class="all-tables-container">
                <div id="sipil-tables-wrapper" class="hidden">
                    </div>
                <div id="me-tables-wrapper" class="hidden">
                    </div>
            </div>
            
            <div class="grand-total-box">
                <span class="grand-total-label">Grand Total Estimasi Biaya:</span>
                <span id="grand-total-amount" class="grand-total-amount">Rp 0</span>
            </div>

            <div class="form-actions">
                <button type="button" id="submit-button" class="btn btn-primary">Kirim</button>
                <button type="reset" class="btn btn-secondary">Ulang</button>
            </div>
        </form>

        <a href="/Homepage/" class="back-btn">← Kembali ke Beranda</a>
    </div>

    <script src="/Estimasi_rab/script.js"></script>
</body>
</html>